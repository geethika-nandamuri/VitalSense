import { useState, useCallback } from 'react';\nimport { validateForm } from '../utils/validation';\n\nexport const useForm = (initialValues, validationRules = {}) => {\n  const [values, setValues] = useState(initialValues);\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = useCallback((e) => {\n    const { name, value } = e.target;\n    setValues(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    // Clear error when user starts typing\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  }, [errors]);\n\n  const handleBlur = useCallback((e) => {\n    const { name } = e.target;\n    setTouched(prev => ({\n      ...prev,\n      [name]: true\n    }));\n    \n    // Validate field on blur\n    if (validationRules[name]) {\n      const { errors: fieldErrors } = validateForm(values, { [name]: validationRules[name] });\n      if (fieldErrors[name]) {\n        setErrors(prev => ({\n          ...prev,\n          [name]: fieldErrors[name]\n        }));\n      }\n    }\n  }, [values, validationRules]);\n\n  const validate = useCallback(() => {\n    const { isValid, errors: validationErrors } = validateForm(values, validationRules);\n    setErrors(validationErrors);\n    return isValid;\n  }, [values, validationRules]);\n\n  const handleSubmit = useCallback((onSubmit) => {\n    return async (e) => {\n      e.preventDefault();\n      setIsSubmitting(true);\n      \n      const isValid = validate();\n      if (isValid) {\n        try {\n          await onSubmit(values);\n        } catch (error) {\n          console.error('Form submission error:', error);\n        }\n      }\n      \n      setIsSubmitting(false);\n    };\n  }, [values, validate]);\n\n  const reset = useCallback(() => {\n    setValues(initialValues);\n    setErrors({});\n    setTouched({});\n    setIsSubmitting(false);\n  }, [initialValues]);\n\n  const setValue = useCallback((name, value) => {\n    setValues(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  }, []);\n\n  const setError = useCallback((name, error) => {\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  }, []);\n\n  return {\n    values,\n    errors,\n    touched,\n    isSubmitting,\n    handleChange,\n    handleBlur,\n    handleSubmit,\n    validate,\n    reset,\n    setValue,\n    setError,\n    setIsSubmitting\n  };\n};